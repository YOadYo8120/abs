import{d as C,u as S,c as $,w as o,a,b as t,e as s,h as A,f as d,t as n,i as r,j as f,o as c,F as B,k as D,r as p}from"./app-CPometxZ.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-Con15RXd.js";import{_ as g,a as x,b as v,c as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-B6RDaEAy.js";import{c as b,_}from"./index--RngV4lN.js";import{_ as V}from"./index-DGvkOZwu.js";import{_ as z}from"./Label.vue_vue_type_script_setup_true_lang-CEEAJ-Dj.js";import{_ as N}from"./Textarea.vue_vue_type_script_setup_true_lang-BpFg4GN9.js";import{D as R}from"./download-DbLEAIUu.js";import"./index-D7U6bHka.js";import"./VisuallyHidden-CZSwHrLu.js";import"./useForwardExpose-BovC4Je4.js";import"./useForwardPropsEmits-CLk4KNd3.js";import"./users-D4iBQ59P.js";const J=b("CircleCheckBigIcon",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const F=b("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),I={class:"py-12"},U={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-6"},E={class:"flex items-center justify-between"},X={class:"grid grid-cols-2 gap-4"},q={class:"text-lg font-semibold"},K={class:"text-sm text-muted-foreground"},M={class:"text-sm text-muted-foreground"},O={key:0},T={class:"text-lg font-semibold"},Y={class:"text-sm"},G={class:"text-sm text-muted-foreground"},H={class:"p-4 bg-muted rounded-lg"},P={class:"text-sm whitespace-pre-wrap"},Q={class:"text-sm"},W={key:0},Z={class:"text-sm"},tt={key:0,class:"text-sm text-muted-foreground"},et={class:"space-y-3"},st={class:"flex-1"},it={class:"font-medium"},at={class:"text-sm text-muted-foreground"},nt=["href"],ot={class:"space-y-2"},dt={class:"flex gap-3"},ut={key:0,class:"mt-4"},lt={class:"p-4 bg-muted rounded-lg"},ct={class:"text-sm whitespace-pre-wrap"},kt=C({__name:"Show",props:{justification:{}},setup(i){const m=i,u=S({status:m.justification.status,admin_notes:m.justification.admin_notes||""}),w=()=>{u.status="approved",u.patch(`/admin/justifications/${m.justification.id}`,{onSuccess:()=>{p.visit("/admin/justifications")}})},h=()=>{u.status="rejected",u.patch(`/admin/justifications/${m.justification.id}`,{onSuccess:()=>{p.visit("/admin/justifications")}})},k=y=>{switch(y){case"approved":return"default";case"rejected":return"destructive";case"pending":return"outline";default:return"secondary"}};return(y,e)=>(c(),$(L,null,{default:o(()=>[a(s(A),{title:"Review Justification"}),t("div",I,[t("div",U,[a(s(g),null,{default:o(()=>[a(s(x),null,{default:o(()=>[t("div",E,[a(s(v),null,{default:o(()=>[...e[2]||(e[2]=[d("Justification Review",-1)])]),_:1}),a(s(V),{variant:k(i.justification.status)},{default:o(()=>[d(n(i.justification.status.charAt(0).toUpperCase()+i.justification.status.slice(1)),1)]),_:1},8,["variant"])])]),_:1}),a(s(j),{class:"space-y-4"},{default:o(()=>[t("div",X,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Student",-1)),t("p",q,n(i.justification.student.name),1),t("p",K,n(i.justification.student.email),1),t("p",M,[d(" Year "+n(i.justification.student.year)+" ",1),i.justification.student.specialization?(c(),r("span",O," - "+n(i.justification.student.specialization),1)):f("",!0)])]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-muted-foreground"},"Absence Details",-1)),t("p",T,n(i.justification.attendance.module_code),1),t("p",Y,n(i.justification.attendance.module),1),t("p",G,n(new Date(i.justification.attendance.date).toLocaleString()),1)])]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Student's Explanation",-1)),t("div",H,[t("p",P,n(i.justification.description),1)])]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Submitted",-1)),t("p",Q,n(new Date(i.justification.created_at).toLocaleString()),1)]),i.justification.reviewed_at?(c(),r("div",W,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Reviewed",-1)),t("p",Z,n(new Date(i.justification.reviewed_at).toLocaleString()),1),i.justification.reviewed_by?(c(),r("p",tt," By "+n(i.justification.reviewed_by),1)):f("",!0)])):f("",!0)]),_:1})]),_:1}),a(s(g),null,{default:o(()=>[a(s(x),null,{default:o(()=>[a(s(v),null,{default:o(()=>[d("Supporting Documents ("+n(i.justification.files.length)+")",1)]),_:1})]),_:1}),a(s(j),null,{default:o(()=>[t("div",et,[(c(!0),r(B,null,D(i.justification.files,l=>(c(),r("div",{key:l.id,class:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent transition-colors"},[t("div",st,[t("p",it,n(l.file_name),1),t("p",at,n(l.file_type.toUpperCase())+" â€¢ "+n(l.file_size)+" KB ",1)]),t("a",{href:l.download_url,class:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"},[a(s(R),{class:"h-4 w-4"}),e[8]||(e[8]=d(" Download ",-1))],8,nt)]))),128))])]),_:1})]),_:1}),a(s(g),null,{default:o(()=>[a(s(x),null,{default:o(()=>[a(s(v),null,{default:o(()=>[...e[9]||(e[9]=[d("Admin Review",-1)])]),_:1})]),_:1}),a(s(j),{class:"space-y-4"},{default:o(()=>[t("div",ot,[a(s(z),{for:"admin_notes"},{default:o(()=>[...e[10]||(e[10]=[d("Notes (Optional)",-1)])]),_:1}),a(s(N),{id:"admin_notes",modelValue:s(u).admin_notes,"onUpdate:modelValue":e[0]||(e[0]=l=>s(u).admin_notes=l),placeholder:"Add notes about your decision...",rows:"3",disabled:i.justification.status!=="pending"},null,8,["modelValue","disabled"])]),t("div",dt,[a(s(_),{onClick:w,disabled:s(u).processing,class:"bg-green-600 hover:bg-green-700"},{default:o(()=>[a(s(J),{class:"h-4 w-4 mr-2"}),d(" "+n(i.justification.status==="approved"?"Already Approved":"Approve Justification"),1)]),_:1},8,["disabled"]),a(s(_),{onClick:h,disabled:s(u).processing,variant:"destructive"},{default:o(()=>[a(s(F),{class:"h-4 w-4 mr-2"}),d(" "+n(i.justification.status==="rejected"?"Already Rejected":"Reject Justification"),1)]),_:1},8,["disabled"]),a(s(_),{variant:"outline",onClick:e[1]||(e[1]=l=>s(p).visit("/admin/justifications"))},{default:o(()=>[...e[11]||(e[11]=[d(" Back to List ",-1)])]),_:1})]),e[13]||(e[13]=d()),i.justification.admin_notes&&i.justification.status!=="pending"?(c(),r("div",ut,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-muted-foreground mb-2"},"Admin Notes",-1)),t("div",lt,[t("p",ct,n(i.justification.admin_notes),1)])])):f("",!0)]),_:1})]),_:1})])])]),_:1}))}});export{kt as default};
