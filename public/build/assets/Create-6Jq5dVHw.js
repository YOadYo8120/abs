import{d as B,u as M,q as D,s as R,c as y,w as o,a as l,b as r,e,h as N,f as i,g as E,i as n,j as m,o as d,F as b,k as C,t as u,n as x,r as A}from"./app-iB5JroHL.js";import{U as P,_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-BjDdRGsn.js";import{_ as U}from"./index-X0dx6blS.js";import{_ as h,a as j,b as q,c as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-BOdCY70B.js";import{_ as O}from"./CardDescription.vue_vue_type_script_setup_true_lang-DOygd7NC.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-CcVhxJql.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-RTZaJV3S.js";import{_ as G}from"./Textarea.vue_vue_type_script_setup_true_lang-C-mz5mvU.js";import{_ as v,a as g,b as k,c as V,d as c}from"./SelectValue.vue_vue_type_script_setup_true_lang-DO0Su85m.js";import"./index-DDOeCoQC.js";import"./VisuallyHidden-CsxWP5mD.js";import"./useForwardExpose-DlFM9lJQ.js";import"./useForwardPropsEmits-CnK8L7VS.js";import"./users-C3V69xlN.js";import"./check-nENIt2ia.js";import"./useFormControl-D6S8Nnlo.js";const H={class:"container mx-auto py-6 max-w-3xl"},I={class:"space-y-2"},J={key:0,class:"space-y-2"},K={key:0,class:"text-sm text-red-500"},Q={key:1,class:"space-y-4"},W={class:"grid grid-cols-2 gap-4"},X={class:"space-y-2"},Y={key:0,class:"text-sm text-muted-foreground"},Z={class:"space-y-2"},ee={key:0,class:"text-sm text-red-500"},se={class:"space-y-2"},te={key:0,class:"text-sm text-red-500"},le={class:"space-y-2"},oe={class:"flex items-center gap-4"},ae={key:0,class:"text-sm text-muted-foreground"},re={key:1,class:"text-sm text-red-500"},ie={class:"flex gap-3"},Ce=B({__name:"Create",props:{modules:{},classes:{}},setup(_){const S=_,t=M({title:"",description:"",file:null,scope:"module",module_id:null,year:null,specialization:null,track:null,semester:null}),$=D(()=>!t.year||!t.semester?null:S.classes.find(f=>f.year===t.year&&f.semester===t.semester&&f.specialization===t.specialization&&f.track===t.track)),F=f=>{const s=f.target;s.files&&s.files[0]&&(t.file=s.files[0])};R(()=>t.scope,()=>{t.module_id=null,t.year=null,t.specialization=null,t.track=null,t.semester=null});const z=()=>{t.post("/teacher/resources")};return(f,s)=>(d(),y(T,null,{default:o(()=>[l(e(N),{title:"Upload Resource"}),r("div",H,[s[19]||(s[19]=r("div",{class:"mb-6"},[r("h1",{class:"text-3xl font-bold"},"Upload Resource"),r("p",{class:"text-muted-foreground"},"Share files with your students")],-1)),l(e(h),null,{default:o(()=>[l(e(j),null,{default:o(()=>[l(e(q),null,{default:o(()=>[...s[6]||(s[6]=[i("Resource Details",-1)])]),_:1}),l(e(O),null,{default:o(()=>[...s[7]||(s[7]=[i("Upload a PDF file for your students",-1)])]),_:1})]),_:1}),l(e(L),null,{default:o(()=>[r("form",{onSubmit:E(z,["prevent"]),class:"space-y-6"},[r("div",I,[l(e(p),{for:"scope"},{default:o(()=>[...s[8]||(s[8]=[i("Resource Scope",-1)])]),_:1}),l(e(v),{modelValue:e(t).scope,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).scope=a)},{default:o(()=>[l(e(g),null,{default:o(()=>[l(e(k),{placeholder:"Select scope"})]),_:1}),l(e(V),null,{default:o(()=>[l(e(c),{value:"module"},{default:o(()=>[...s[9]||(s[9]=[i("Module - All students in this module",-1)])]),_:1}),l(e(c),{value:"class"},{default:o(()=>[...s[10]||(s[10]=[i("Class - All students in a specific class",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s[11]||(s[11]=r("p",{class:"text-xs text-muted-foreground"}," Choose who will receive this resource ",-1))]),e(t).scope==="module"?(d(),n("div",J,[l(e(p),{for:"module"},{default:o(()=>[...s[12]||(s[12]=[i("Module",-1)])]),_:1}),l(e(v),{modelValue:e(t).module_id,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).module_id=a)},{default:o(()=>[l(e(g),null,{default:o(()=>[l(e(k),{placeholder:"Select module"})]),_:1}),l(e(V),null,{default:o(()=>[(d(!0),n(b,null,C(_.modules,a=>(d(),y(e(c),{key:a.id,value:a.id},{default:o(()=>[i(u(a.code)+" - "+u(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(t).errors.module_id?(d(),n("p",K,u(e(t).errors.module_id),1)):m("",!0)])):m("",!0),e(t).scope==="class"?(d(),n("div",Q,[r("div",W,[r("div",X,[l(e(p),null,{default:o(()=>[...s[13]||(s[13]=[i("Class",-1)])]),_:1}),l(e(v),{modelValue:e(t).year,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).year=a)},{default:o(()=>[l(e(g),null,{default:o(()=>[l(e(k),{placeholder:"Select year"})]),_:1}),l(e(V),null,{default:o(()=>[(d(!0),n(b,null,C(_.classes,a=>(d(),y(e(c),{key:a.name,value:a.year},{default:o(()=>[i(u(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),$.value?(d(),n("p",Y," Selected: "+u($.value.name),1)):m("",!0)])):m("",!0),r("div",Z,[l(e(p),{for:"title"},{default:o(()=>[...s[14]||(s[14]=[i("Title",-1)])]),_:1}),l(e(w),{id:"title",modelValue:e(t).title,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).title=a),placeholder:"Enter resource title",class:x({"border-red-500":e(t).errors.title})},null,8,["modelValue","class"]),e(t).errors.title?(d(),n("p",ee,u(e(t).errors.title),1)):m("",!0)]),r("div",se,[l(e(p),{for:"description"},{default:o(()=>[...s[15]||(s[15]=[i("Description (Optional)",-1)])]),_:1}),l(e(G),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).description=a),placeholder:"Enter resource description",rows:"3",class:x({"border-red-500":e(t).errors.description})},null,8,["modelValue","class"]),e(t).errors.description?(d(),n("p",te,u(e(t).errors.description),1)):m("",!0)]),r("div",le,[l(e(p),{for:"file"},{default:o(()=>[...s[16]||(s[16]=[i("PDF File",-1)])]),_:1}),r("div",oe,[l(e(w),{id:"file",type:"file",accept:".pdf",onChange:F,class:x({"border-red-500":e(t).errors.file})},null,8,["class"]),l(e(P),{class:"h-5 w-5 text-muted-foreground"})]),e(t).file?(d(),n("p",ae," Selected: "+u(e(t).file.name)+" ("+u((e(t).file.size/1024/1024).toFixed(2))+" MB) ",1)):m("",!0),e(t).errors.file?(d(),n("p",re,u(e(t).errors.file),1)):m("",!0),s[17]||(s[17]=r("p",{class:"text-xs text-muted-foreground"},"Maximum file size: 50MB",-1))]),r("div",ie,[l(e(U),{type:"submit",disabled:e(t).processing},{default:o(()=>[i(u(e(t).processing?"Uploading...":"Upload Resource"),1)]),_:1},8,["disabled"]),l(e(U),{type:"button",variant:"outline",onClick:s[5]||(s[5]=a=>e(A).visit("/teacher/resources"))},{default:o(()=>[...s[18]||(s[18]=[i(" Cancel ",-1)])]),_:1})])],32)]),_:1})]),_:1})])]),_:1}))}});export{Ce as default};
