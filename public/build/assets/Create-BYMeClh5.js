import{d as B,u as M,q as D,s as R,c as y,w as o,a as l,b as a,e,h as N,f as i,g as E,i as n,j as m,o as d,F as b,k as C,t as u,n as x,r as A}from"./app-CQScspJV.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-H8USLuKZ.js";import{_ as U}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CWTvO1CT.js";import{_ as T,a as h,b as j,c as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-C8JhjThn.js";import{_ as L}from"./CardDescription.vue_vue_type_script_setup_true_lang-BoDmBqrY.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-CicpqTIb.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-J_y2c9_X.js";import{_ as O}from"./Textarea.vue_vue_type_script_setup_true_lang-BmU2XyMy.js";import{_ as v,a as g,b as k,c as V,d as c}from"./SelectValue.vue_vue_type_script_setup_true_lang--ddNUqrt.js";import{U as G}from"./upload-C9u0gFJa.js";import"./index-3yuum4Sn.js";import"./VisuallyHidden-gVgl18LK.js";import"./useForwardExpose-Vv3P2laI.js";import"./useForwardPropsEmits-DnKx72kq.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-DNvKDgj3.js";import"./check-B6qghZgb.js";import"./useFormControl-DCuIHI-Z.js";const H={class:"container mx-auto py-6 max-w-3xl"},I={class:"space-y-2"},J={key:0,class:"space-y-2"},K={key:0,class:"text-sm text-red-500"},Q={key:1,class:"space-y-4"},W={class:"grid grid-cols-2 gap-4"},X={class:"space-y-2"},Y={key:0,class:"text-sm text-muted-foreground"},Z={class:"space-y-2"},ee={key:0,class:"text-sm text-red-500"},se={class:"space-y-2"},te={key:0,class:"text-sm text-red-500"},le={class:"space-y-2"},oe={class:"flex items-center gap-4"},re={key:0,class:"text-sm text-muted-foreground"},ae={key:1,class:"text-sm text-red-500"},ie={class:"flex gap-3"},we=B({__name:"Create",props:{modules:{},classes:{}},setup(_){const S=_,t=M({title:"",description:"",file:null,scope:"module",module_id:null,year:null,specialization:null,track:null,semester:null}),$=D(()=>!t.year||!t.semester?null:S.classes.find(f=>f.year===t.year&&f.semester===t.semester&&f.specialization===t.specialization&&f.track===t.track)),F=f=>{const s=f.target;s.files&&s.files[0]&&(t.file=s.files[0])};R(()=>t.scope,()=>{t.module_id=null,t.year=null,t.specialization=null,t.track=null,t.semester=null});const z=()=>{t.post("/teacher/resources")};return(f,s)=>(d(),y(P,null,{default:o(()=>[l(e(N),{title:"Upload Resource"}),a("div",H,[s[19]||(s[19]=a("div",{class:"mb-6"},[a("h1",{class:"text-3xl font-bold"},"Upload Resource"),a("p",{class:"text-muted-foreground"},"Share files with your students")],-1)),l(e(T),null,{default:o(()=>[l(e(h),null,{default:o(()=>[l(e(j),null,{default:o(()=>[...s[6]||(s[6]=[i("Resource Details",-1)])]),_:1}),l(e(L),null,{default:o(()=>[...s[7]||(s[7]=[i("Upload a PDF file for your students",-1)])]),_:1})]),_:1}),l(e(q),null,{default:o(()=>[a("form",{onSubmit:E(z,["prevent"]),class:"space-y-6"},[a("div",I,[l(e(p),{for:"scope"},{default:o(()=>[...s[8]||(s[8]=[i("Resource Scope",-1)])]),_:1}),l(e(v),{modelValue:e(t).scope,"onUpdate:modelValue":s[0]||(s[0]=r=>e(t).scope=r)},{default:o(()=>[l(e(g),null,{default:o(()=>[l(e(k),{placeholder:"Select scope"})]),_:1}),l(e(V),null,{default:o(()=>[l(e(c),{value:"module"},{default:o(()=>[...s[9]||(s[9]=[i("Module - All students in this module",-1)])]),_:1}),l(e(c),{value:"class"},{default:o(()=>[...s[10]||(s[10]=[i("Class - All students in a specific class",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s[11]||(s[11]=a("p",{class:"text-xs text-muted-foreground"}," Choose who will receive this resource ",-1))]),e(t).scope==="module"?(d(),n("div",J,[l(e(p),{for:"module"},{default:o(()=>[...s[12]||(s[12]=[i("Module",-1)])]),_:1}),l(e(v),{modelValue:e(t).module_id,"onUpdate:modelValue":s[1]||(s[1]=r=>e(t).module_id=r)},{default:o(()=>[l(e(g),null,{default:o(()=>[l(e(k),{placeholder:"Select module"})]),_:1}),l(e(V),null,{default:o(()=>[(d(!0),n(b,null,C(_.modules,r=>(d(),y(e(c),{key:r.id,value:r.id},{default:o(()=>[i(u(r.code)+" - "+u(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(t).errors.module_id?(d(),n("p",K,u(e(t).errors.module_id),1)):m("",!0)])):m("",!0),e(t).scope==="class"?(d(),n("div",Q,[a("div",W,[a("div",X,[l(e(p),null,{default:o(()=>[...s[13]||(s[13]=[i("Class",-1)])]),_:1}),l(e(v),{modelValue:e(t).year,"onUpdate:modelValue":s[2]||(s[2]=r=>e(t).year=r)},{default:o(()=>[l(e(g),null,{default:o(()=>[l(e(k),{placeholder:"Select year"})]),_:1}),l(e(V),null,{default:o(()=>[(d(!0),n(b,null,C(_.classes,r=>(d(),y(e(c),{key:r.name,value:r.year},{default:o(()=>[i(u(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),$.value?(d(),n("p",Y," Selected: "+u($.value.name),1)):m("",!0)])):m("",!0),a("div",Z,[l(e(p),{for:"title"},{default:o(()=>[...s[14]||(s[14]=[i("Title",-1)])]),_:1}),l(e(w),{id:"title",modelValue:e(t).title,"onUpdate:modelValue":s[3]||(s[3]=r=>e(t).title=r),placeholder:"Enter resource title",class:x({"border-red-500":e(t).errors.title})},null,8,["modelValue","class"]),e(t).errors.title?(d(),n("p",ee,u(e(t).errors.title),1)):m("",!0)]),a("div",se,[l(e(p),{for:"description"},{default:o(()=>[...s[15]||(s[15]=[i("Description (Optional)",-1)])]),_:1}),l(e(O),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[4]||(s[4]=r=>e(t).description=r),placeholder:"Enter resource description",rows:"3",class:x({"border-red-500":e(t).errors.description})},null,8,["modelValue","class"]),e(t).errors.description?(d(),n("p",te,u(e(t).errors.description),1)):m("",!0)]),a("div",le,[l(e(p),{for:"file"},{default:o(()=>[...s[16]||(s[16]=[i("PDF File",-1)])]),_:1}),a("div",oe,[l(e(w),{id:"file",type:"file",accept:".pdf",onChange:F,class:x({"border-red-500":e(t).errors.file})},null,8,["class"]),l(e(G),{class:"h-5 w-5 text-muted-foreground"})]),e(t).file?(d(),n("p",re," Selected: "+u(e(t).file.name)+" ("+u((e(t).file.size/1024/1024).toFixed(2))+" MB) ",1)):m("",!0),e(t).errors.file?(d(),n("p",ae,u(e(t).errors.file),1)):m("",!0),s[17]||(s[17]=a("p",{class:"text-xs text-muted-foreground"},"Maximum file size: 50MB",-1))]),a("div",ie,[l(e(U),{type:"submit",disabled:e(t).processing},{default:o(()=>[i(u(e(t).processing?"Uploading...":"Upload Resource"),1)]),_:1},8,["disabled"]),l(e(U),{type:"button",variant:"outline",onClick:s[5]||(s[5]=r=>e(A).visit("/teacher/resources"))},{default:o(()=>[...s[18]||(s[18]=[i(" Cancel ",-1)])]),_:1})])],32)]),_:1})]),_:1})])]),_:1}))}});export{we as default};
