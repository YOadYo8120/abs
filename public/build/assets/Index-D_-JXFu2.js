import{d as h,m as c,p as ee,q as $,s as le,r as ae,c as x,w as t,a as l,b as v,e,h as te,f as s,j as _,i,o as n,t as r,F as b,k as G}from"./app-CQScspJV.js";import{_ as ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-H8USLuKZ.js";import{_ as se}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CWTvO1CT.js";import{_ as ne,a as re,b as oe,c as de}from"./CardTitle.vue_vue_type_script_setup_true_lang-C8JhjThn.js";import{_ as ie}from"./CardDescription.vue_vue_type_script_setup_true_lang-BoDmBqrY.js";import{_ as y,a as S,b as k,c as V,d}from"./SelectValue.vue_vue_type_script_setup_true_lang--ddNUqrt.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-J_y2c9_X.js";import{_ as U,a as C}from"./index-BqN0SRT-.js";import{C as ve}from"./circle-alert-BrqTWBae.js";import{F as me}from"./file-down-gaeA-wAp.js";import"./index-3yuum4Sn.js";import"./VisuallyHidden-gVgl18LK.js";import"./useForwardExpose-Vv3P2laI.js";import"./useForwardPropsEmits-DnKx72kq.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-DNvKDgj3.js";import"./check-B6qghZgb.js";import"./useFormControl-DCuIHI-Z.js";const fe={class:"py-12"},ce={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-6"},pe={key:0,class:"font-medium"},_e={class:"space-y-2"},ye={class:"space-y-2"},Se={key:1,class:"space-y-2"},ke={key:2,class:"space-y-2"},Ve={class:"space-y-2"},ge={class:"space-y-2"},be={key:5,class:"space-y-2"},Ge={class:"space-y-2"},we={class:"pt-4"},We=h({__name:"Index",props:{weeks:{},currentYear:{},currentSemester:{},currentSpecialization:{},currentTrack:{}},setup(D){const T=D,o=c(T.currentYear),w=c(T.currentSemester),m=c(T.currentSpecialization||null),f=c(T.currentTrack||null),Y=c(null),z=c(null),F=c(null),I=c(""),P=c(!1),L=ee(),N=$(()=>L.props.errors),E=$(()=>L.props.error),W=$(()=>Object.keys(N.value).length>0||E.value),R=["08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"],j=[{value:"GI",label:"Génie Informatique"},{value:"GRT",label:"Génie des Réseaux et Télécommunications"},{value:"GInd",label:"Génie Industriel"},{value:"GM",label:"Génie Mécanique"},{value:"GA",label:"Génie de l'Eau et de l'Environnement"},{value:"GPM",label:"Génie des Procédés et Management de la Qualité"}],H=[{value:"DEV",label:"Development"},{value:"AI",label:"Artificial Intelligence"}],O=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Q=[{value:"1h",label:"1 Hour"},{value:"2h",label:"2 Hours"}],J=$(()=>o.value>=3),A=$(()=>o.value>=4&&o.value<=5&&m.value==="GI"),q=$(()=>o.value>=3&&!m.value||A.value&&!f.value?!1:Y.value&&z.value&&F.value&&I.value),B=p=>{const a=new Date(p),u=String(a.getDate()).padStart(2,"0"),M=String(a.getMonth()+1).padStart(2,"0"),Z=a.getFullYear();return`${u}/${M}/${Z}`};le([o,w,m,f],([p,,a])=>{p<=2&&a&&(m.value=null,f.value=null),A.value||(f.value=null),K()});const K=()=>{ae.get("/admin/attendance-list",{year:o.value,semester:w.value,specialization:m.value,track:f.value},{preserveState:!0,preserveScroll:!0})},X=()=>{if(!q.value)return;P.value=!0;const p={year:o.value.toString(),semester:w.value.toString(),week_number:z.value.toString(),day:F.value,duration:Y.value,start_time:I.value};m.value&&(p.specialization=m.value),f.value&&(p.track=f.value);const a=new URLSearchParams(p).toString();window.location.href=`/admin/attendance-list/generate?${a}`,setTimeout(()=>{P.value=!1},2e3)};return(p,a)=>(n(),x(ue,null,{default:t(()=>[l(e(te),{title:"Generate Attendance List"}),v("div",fe,[v("div",ce,[a[25]||(a[25]=v("div",null,[v("h2",{class:"text-2xl font-semibold text-gray-900"},"Generate Attendance List"),v("p",{class:"mt-1 text-sm text-gray-600"}," Generate a printable PDF attendance list for any class session ")],-1)),l(e(ne),null,{default:t(()=>[l(e(re),null,{default:t(()=>[l(e(oe),null,{default:t(()=>[...a[8]||(a[8]=[s("Select Session Details",-1)])]),_:1}),l(e(ie),null,{default:t(()=>[...a[9]||(a[9]=[s("Choose the year, semester, module, week, and day",-1)])]),_:1})]),_:1}),l(e(de),{class:"space-y-6"},{default:t(()=>[W.value?(n(),x(e(U),{key:0,class:"border-red-500 bg-red-50"},{default:t(()=>[l(e(ve),{class:"h-4 w-4 text-red-600"}),l(e(C),{class:"text-red-600"},{default:t(()=>[E.value?(n(),i("div",pe,r(E.value),1)):_("",!0),(n(!0),i(b,null,G(N.value,(u,M)=>(n(),i("div",{key:M,class:"mt-1"},r(u),1))),128))]),_:1})]),_:1})):_("",!0),v("div",_e,[l(e(g),null,{default:t(()=>[...a[10]||(a[10]=[s("Academic Year",-1)])]),_:1}),l(e(y),{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=u=>o.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select year"})]),_:1}),l(e(V),null,{default:t(()=>[l(e(d),{value:1},{default:t(()=>[...a[11]||(a[11]=[s("Year 1",-1)])]),_:1}),l(e(d),{value:2},{default:t(()=>[...a[12]||(a[12]=[s("Year 2",-1)])]),_:1}),l(e(d),{value:3},{default:t(()=>[...a[13]||(a[13]=[s("Year 3",-1)])]),_:1}),l(e(d),{value:4},{default:t(()=>[...a[14]||(a[14]=[s("Year 4",-1)])]),_:1}),l(e(d),{value:5},{default:t(()=>[...a[15]||(a[15]=[s("Year 5",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),v("div",ye,[l(e(g),null,{default:t(()=>[...a[16]||(a[16]=[s("Semester",-1)])]),_:1}),l(e(y),{modelValue:w.value,"onUpdate:modelValue":a[1]||(a[1]=u=>w.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select semester"})]),_:1}),l(e(V),null,{default:t(()=>[l(e(d),{value:1},{default:t(()=>[...a[17]||(a[17]=[s("Semester 1",-1)])]),_:1}),l(e(d),{value:2},{default:t(()=>[...a[18]||(a[18]=[s("Semester 2",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),J.value?(n(),i("div",Se,[l(e(g),null,{default:t(()=>[...a[19]||(a[19]=[s("Specialization",-1)])]),_:1}),l(e(y),{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=u=>m.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select specialization"})]),_:1}),l(e(V),null,{default:t(()=>[(n(),i(b,null,G(j,u=>l(e(d),{key:u.value,value:u.value},{default:t(()=>[s(r(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])])):_("",!0),A.value?(n(),i("div",ke,[l(e(g),null,{default:t(()=>[...a[20]||(a[20]=[s("Track",-1)])]),_:1}),l(e(y),{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=u=>f.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select track"})]),_:1}),l(e(V),null,{default:t(()=>[(n(),i(b,null,G(H,u=>l(e(d),{key:u.value,value:u.value},{default:t(()=>[s(r(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])])):_("",!0),o.value>=3&&!m.value?(n(),x(e(U),{key:3},{default:t(()=>[l(e(C),null,{default:t(()=>[s(" Please select a specialization to view modules for Year "+r(o.value),1)]),_:1})]),_:1})):_("",!0),A.value&&!f.value?(n(),x(e(U),{key:4},{default:t(()=>[l(e(C),null,{default:t(()=>[s(" Please select a track (DEV or AI) for GI Year "+r(o.value),1)]),_:1})]),_:1})):_("",!0),v("div",Ve,[l(e(g),null,{default:t(()=>[...a[21]||(a[21]=[s("Session Duration",-1)])]),_:1}),l(e(y),{modelValue:Y.value,"onUpdate:modelValue":a[4]||(a[4]=u=>Y.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select duration"})]),_:1}),l(e(V),null,{default:t(()=>[(n(),i(b,null,G(Q,u=>l(e(d),{key:u.value,value:u.value},{default:t(()=>[s(r(u.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),v("div",ge,[l(e(g),null,{default:t(()=>[...a[22]||(a[22]=[s("Start Time",-1)])]),_:1}),l(e(y),{modelValue:I.value,"onUpdate:modelValue":a[5]||(a[5]=u=>I.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select start time"})]),_:1}),l(e(V),null,{default:t(()=>[(n(),i(b,null,G(R,u=>l(e(d),{key:u,value:u},{default:t(()=>[s(r(u),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),D.weeks.length>0?(n(),i("div",be,[l(e(g),null,{default:t(()=>[...a[23]||(a[23]=[s("Week",-1)])]),_:1}),l(e(y),{modelValue:z.value,"onUpdate:modelValue":a[6]||(a[6]=u=>z.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select week"})]),_:1}),l(e(V),null,{default:t(()=>[(n(!0),i(b,null,G(D.weeks,u=>(n(),x(e(d),{key:u.number,value:u.number},{default:t(()=>[s(" Week "+r(u.number)+" ("+r(B(u.start_date))+" - "+r(B(u.end_date))+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])):_("",!0),D.weeks.length===0?(n(),x(e(U),{key:6},{default:t(()=>[l(e(C),null,{default:t(()=>[s(" No weeks found in academic calendar for Year "+r(o.value)+", Semester "+r(w.value),1)]),_:1})]),_:1})):_("",!0),v("div",Ge,[l(e(g),null,{default:t(()=>[...a[24]||(a[24]=[s("Day",-1)])]),_:1}),l(e(y),{modelValue:F.value,"onUpdate:modelValue":a[7]||(a[7]=u=>F.value=u)},{default:t(()=>[l(e(S),null,{default:t(()=>[l(e(k),{placeholder:"Select day"})]),_:1}),l(e(V),null,{default:t(()=>[(n(),i(b,null,G(O,u=>l(e(d),{key:u,value:u},{default:t(()=>[s(r(u),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),v("div",we,[l(e(se),{onClick:X,disabled:!q.value||P.value,class:"w-full",size:"lg"},{default:t(()=>[l(e(me),{class:"mr-2 h-5 w-5"}),s(" "+r(P.value?"Generating PDF...":"Generate Attendance List PDF"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})])])]),_:1}))}});export{We as default};
