import{d as Ee,m as h,q as G,s as _e,r as L,c as g,w as a,a as s,b as u,e as l,h as Fe,j as y,f as d,i as v,o,F as S,k as D,t as i,n as ne,v as re,x as oe}from"./app-CQScspJV.js";import{_ as Me}from"./AppLayout.vue_vue_type_script_setup_true_lang-H8USLuKZ.js";import{_ as T}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CWTvO1CT.js";import{_ as de,a as ie,b as ce,c as ve}from"./CardTitle.vue_vue_type_script_setup_true_lang-C8JhjThn.js";import{_ as ke}from"./CardDescription.vue_vue_type_script_setup_true_lang-BoDmBqrY.js";import{_ as N,a as j,b as P,c as B,d as V}from"./SelectValue.vue_vue_type_script_setup_true_lang--ddNUqrt.js";import{_ as q}from"./index-CyvA0Ved.js";import{_ as H,a as J}from"./index-BqN0SRT-.js";import{_ as be,a as he,b as we,c as $e,d as Se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CYJ_PJj-.js";import{_ as Ue}from"./Checkbox.vue_vue_type_script_setup_true_lang-CjUrK1kD.js";import{i as Ge,u as Ne,d as je}from"./index-BIj56fZk.js";import"./index-3yuum4Sn.js";import"./VisuallyHidden-gVgl18LK.js";import"./useForwardExpose-Vv3P2laI.js";import"./useForwardPropsEmits-DnKx72kq.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-DNvKDgj3.js";import"./check-B6qghZgb.js";import"./useFormControl-DCuIHI-Z.js";const Pe={class:"py-12"},Be={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},Oe={class:"flex gap-4 items-end flex-wrap"},Re={class:"flex-1 min-w-[150px]"},Le={class:"flex-1 min-w-[150px]"},qe={key:0,class:"flex-1 min-w-[200px]"},He={key:1,class:"flex-1 min-w-[150px]"},Je={class:"flex-1 min-w-[200px]"},Qe={key:1,class:"overflow-x-auto"},Ke={class:"w-full border-collapse"},Xe={class:"border p-2 bg-gray-100 text-xs text-center whitespace-nowrap sticky left-0 z-10 text-gray-900 font-medium"},Ze=["onClick"],et={class:"font-semibold"},tt={class:"truncate text-[11px]"},lt={key:0,class:"mt-1 text-[10px] text-blue-700 font-medium"},at={key:1,class:"mt-1 text-[10px] text-green-700 font-medium"},st={key:2,class:"mt-1 text-[10px] text-gray-500 font-medium"},ut={key:1,class:"p-2 text-center"},nt={key:2,class:"p-2 space-y-2 bg-gray-50 rounded"},rt=["value"],ot=["disabled"],dt=["disabled"],it=["value"],ct={class:"flex gap-1"},vt={class:"mt-4 flex items-center gap-4"},ft={class:"text-sm text-gray-600"},mt={class:"flex flex-wrap gap-2"},pt={class:"flex flex-wrap gap-2"},xt={class:"space-y-3"},yt={class:"flex items-start gap-3 text-left w-full"},gt={class:"flex-1"},_t={class:"text-xs text-muted-foreground mt-1"},kt={class:"mt-4 flex justify-end"},bt={key:0,class:"text-center py-8"},ht={key:1,class:"text-center py-8 text-gray-500"},wt={key:2,class:"space-y-2"},$t=["for"],St={class:"font-medium"},Dt={class:"text-xs text-gray-500"},Tt={class:"mt-4 flex justify-end"},qt=Ee({__name:"Index",props:{schedules:{},modules:{},teachers:{},timeSlots:{},days:{},currentYear:{},currentSemester:{},currentWeek:{},templateExists:{type:Boolean},replicatedWeeks:{},currentSpecialization:{},currentTrack:{},teacherId:{},weekDates:{}},setup(w){const m=w,z=m.teacherId,p=h(m.currentYear),A=h(m.currentSemester),_=h(m.currentWeek===0?m.replicatedWeeks.length>0?m.replicatedWeeks[0]:1:m.currentWeek),k=h(m.currentSpecialization||null),b=h(m.currentTrack||null),De=[{value:"GI",label:"GÃ©nie Informatique"},{value:"GRT",label:"GÃ©nie des RÃ©seaux et TÃ©lÃ©communications"},{value:"GInd",label:"GÃ©nie Industriel"},{value:"GM",label:"GÃ©nie MÃ©canique"},{value:"GA",label:"GÃ©nie de l'Eau et de l'Environnement"},{value:"GPM",label:"GÃ©nie des ProcÃ©dÃ©s et Management de la QualitÃ©"}],Te=[{value:"DEV",label:"Development"},{value:"AI",label:"Artificial Intelligence"}],fe=G(()=>p.value>=3),W=G(()=>p.value>=4&&p.value<=5&&k.value==="GI"),Q=G(()=>p.value>=3?!(!k.value||W.value&&!b.value):!0),O=r=>{if(!Q.value)return!1;if(r){const e=r.module&&r.module.teacher_id===z,t=r.teacher_id===z;return e||t}return!0},E=h(null),f=h({moduleId:null,scheduleType:null,teacherId:null}),K=h(!1),I=h(null),F=h([]),C=h({}),X=h(!1),Z=h(!1),$=h(null);console.log("Props received:",{modules:m.modules,days:m.days,currentYear:m.currentYear,currentSemester:m.currentSemester}),_e([p,A,_,k,b],([r,e,t,n,c],[M,R,ue,U,Ye])=>{if(r<=2&&n){k.value=null,b.value=null;return}if(!W.value&&c){b.value=null;return}(r!==M||e!==R||t!==ue||n!==U||c!==Ye)&&(console.log("Filter changed, reloading:",{newYear:r,newSemester:e,newWeek:t,newSpec:n,newTrack:c}),ee())});const x=(r,e)=>m.schedules.find(t=>t.day===r&&t.start_time===e.start&&t.end_time===e.end),me=r=>{const e=new Date("2025-09-22"),t=new Date("2026-02-02"),n=A.value===1?e:t,c=_.value-1,R=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(r);if(R===-1)return null;const ue=c*7+R,U=new Date(n);return U.setDate(U.getDate()+ue),U},Y=r=>{const e=me(r);if(!e)return!0;const t=new Date;return t.setHours(0,0,0,0),e.setHours(0,0,0,0),e>t},ee=()=>{console.log("Updating filter with:",{year:p.value,semester:A.value,week:_.value,specialization:k.value,track:b.value});const r={year:p.value,semester:A.value,week:_.value};p.value>=3&&k.value&&(r.specialization=k.value),W.value&&b.value&&(r.track=b.value),L.get(Ge.url(),r,{preserveState:!1,preserveScroll:!0})},Ie=(r,e)=>{if(!f.value.moduleId)return;console.log("Assigning module:",{day:r,timeSlot:e,editForm:f.value});const t={year:p.value,semester:A.value,week_number:_.value,day:r,start_time:e.start,end_time:e.end,module_id:f.value.moduleId,schedule_type:f.value.scheduleType,teacher_id:f.value.teacherId};p.value>=3&&k.value&&(t.specialization=k.value),W.value&&b.value&&(t.track=b.value),L.post(Ne.url(),t,{preserveState:!1,preserveScroll:!0,onSuccess:()=>{E.value=null,f.value={moduleId:null,scheduleType:"course",teacherId:null}},onError:n=>{console.error("Schedule update errors:",n),alert("Failed to update schedule: "+JSON.stringify(n))}})},te=(r,e)=>{const t=x(r,e);O(t)&&(E.value={day:r,time:e.start},t?f.value={moduleId:t.module_id,scheduleType:t.schedule_type||null,teacherId:t.teacher_id||null}:f.value={moduleId:null,scheduleType:"course",teacherId:null})};_e(()=>f.value.moduleId,r=>{if(r){const e=m.modules.find(t=>t.id===r);e&&e.teacher_id&&(f.value.teacherId=e.teacher_id),f.value.scheduleType||(f.value.scheduleType="course")}});const Ce=()=>{E.value=null,f.value={moduleId:null,scheduleType:null,teacherId:null}},pe=(r,e)=>E.value?.day===r&&E.value?.time===e.start,xe=(r,e)=>{const t=x(r,e);if(!O(t)){alert("You can only delete your own schedules.");return}if(!confirm("Are you sure you want to remove this module from the schedule?"))return;const n={year:p.value,semester:A.value,week_number:_.value,day:r,start_time:e.start,end_time:e.end};p.value>=3&&k.value&&(n.specialization=k.value),W.value&&b.value&&(n.track=b.value),L.delete(je.url(),{data:n,preserveState:!1,preserveScroll:!0,onError:c=>{console.error("Schedule delete errors:",c),alert("Failed to delete schedule: "+JSON.stringify(c))}})},Ve=r=>{$.value=r,Z.value=!0},le=()=>{Z.value=!1,$.value=null},ae=r=>{const e=$.value;if(e){if(le(),r==="attendance")Ae(e);else if(r==="edit"){const t=m.timeSlots.find(n=>n.start===e.start_time&&n.end===e.end_time);t&&te(e.day,t)}else if(r==="delete"){const t={start:e.start_time,end:e.end_time};xe(e.day,t)}}},Ae=async r=>{if(r.teacher_id!==z){alert("You can only mark attendance for sessions you are teaching.");return}if(Y(r.day)){const t=me(r.day)?.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});alert(`You cannot mark attendance for future classes.
This class is scheduled for: ${t}

You can only mark attendance for today or past dates.`);return}I.value=r,K.value=!0,X.value=!0,C.value={};try{const t=await(await fetch(`/teacher/attendance?schedule_id=${r.id}`,{headers:{Accept:"application/json"}})).json();if(t.props){F.value=t.props.students||[];const n=t.props.attendances||{};F.value.forEach(c=>{const M=n[c.id];C.value[c.id]=!!(M&&M.status==="absent")})}}catch(e){console.error("Failed to load students:",e),alert("Failed to load students")}finally{X.value=!1}},ze=async r=>{if(!I.value)return;const e=C.value[r],t=e?"absent":"present";try{L.post("/teacher/attendance",{schedule_id:I.value.id,student_id:r,status:t},{preserveState:!0,preserveScroll:!0,onError:n=>{console.error("Failed to update attendance:",n),C.value[r]=!e,n.message?alert(n.message):alert("Failed to update attendance. Please try again.")},onSuccess:()=>{console.log("Attendance updated successfully")}})}catch(n){console.error("Error updating attendance:",n),C.value[r]=!e}},ye=()=>{K.value=!1,I.value=null,F.value=[],C.value={}},se=G(()=>_.value===0),ge=r=>{const e=new Date(r),t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),c=e.getFullYear();return`${t}/${n}/${c}`},We=G(()=>se.value?"Template Week":m.weekDates&&m.weekDates.start&&m.weekDates.end?`Week ${_.value}: ${ge(m.weekDates.start)} - ${ge(m.weekDates.end)}`:`Week ${_.value}`);return(r,e)=>(o(),g(Me,null,{default:a(()=>[s(l(Fe),{title:"Schedules"}),u("div",Pe,[u("div",Be,[e[42]||(e[42]=u("div",{class:"flex items-center justify-between"},[u("div",null,[u("h2",{class:"text-2xl font-semibold text-gray-900"},"My Schedule"),u("p",{class:"mt-1 text-sm text-gray-600"}," View all schedules and manage your own teaching hours ")])],-1)),s(l(de),null,{default:a(()=>[s(l(ie),null,{default:a(()=>[s(l(ce),null,{default:a(()=>[...e[15]||(e[15]=[d("Filters",-1)])]),_:1}),s(l(ke),null,{default:a(()=>[...e[16]||(e[16]=[d("Select year, semester, and week",-1)])]),_:1})]),_:1}),s(l(ve),null,{default:a(()=>[u("div",Oe,[u("div",Re,[e[22]||(e[22]=u("label",{class:"block text-sm font-medium mb-2"},"Year",-1)),s(l(N),{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t)},{default:a(()=>[s(l(j),null,{default:a(()=>[s(l(P),{placeholder:"Select year"})]),_:1}),s(l(B),null,{default:a(()=>[s(l(V),{value:1},{default:a(()=>[...e[17]||(e[17]=[d("Year 1",-1)])]),_:1}),s(l(V),{value:2},{default:a(()=>[...e[18]||(e[18]=[d("Year 2",-1)])]),_:1}),s(l(V),{value:3},{default:a(()=>[...e[19]||(e[19]=[d("Year 3",-1)])]),_:1}),s(l(V),{value:4},{default:a(()=>[...e[20]||(e[20]=[d("Year 4",-1)])]),_:1}),s(l(V),{value:5},{default:a(()=>[...e[21]||(e[21]=[d("Year 5",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",Le,[e[25]||(e[25]=u("label",{class:"block text-sm font-medium mb-2"},"Semester",-1)),s(l(N),{modelValue:A.value,"onUpdate:modelValue":e[1]||(e[1]=t=>A.value=t)},{default:a(()=>[s(l(j),null,{default:a(()=>[s(l(P),{placeholder:"Select semester"})]),_:1}),s(l(B),null,{default:a(()=>[s(l(V),{value:1},{default:a(()=>[...e[23]||(e[23]=[d("Semester 1",-1)])]),_:1}),s(l(V),{value:2},{default:a(()=>[...e[24]||(e[24]=[d("Semester 2",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),fe.value?(o(),v("div",qe,[e[26]||(e[26]=u("label",{class:"block text-sm font-medium mb-2"},"Specialization",-1)),s(l(N),{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=t=>k.value=t)},{default:a(()=>[s(l(j),null,{default:a(()=>[s(l(P),{placeholder:"Select specialization"})]),_:1}),s(l(B),null,{default:a(()=>[(o(),v(S,null,D(De,t=>s(l(V),{key:t.value,value:t.value},{default:a(()=>[d(i(t.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])])):y("",!0),W.value?(o(),v("div",He,[e[27]||(e[27]=u("label",{class:"block text-sm font-medium mb-2"},"Track",-1)),s(l(N),{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=t=>b.value=t)},{default:a(()=>[s(l(j),null,{default:a(()=>[s(l(P),{placeholder:"Select track"})]),_:1}),s(l(B),null,{default:a(()=>[(o(),v(S,null,D(Te,t=>s(l(V),{key:t.value,value:t.value},{default:a(()=>[d(i(t.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])])):y("",!0),u("div",Je,[e[28]||(e[28]=u("label",{class:"block text-sm font-medium mb-2"},"Week",-1)),s(l(N),{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=t=>_.value=t)},{default:a(()=>[s(l(j),null,{default:a(()=>[s(l(P),{placeholder:"Select week"})]),_:1}),s(l(B),null,{default:a(()=>[(o(!0),v(S,null,D(w.replicatedWeeks,t=>(o(),g(l(V),{key:t,value:t},{default:a(()=>[d(" Week "+i(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e[29]||(e[29]=u("p",{class:"text-xs text-gray-500 mt-2"},"Changes automatically update when you select a different option",-1)),fe.value&&!k.value?(o(),g(l(H),{key:0,class:"mt-4"},{default:a(()=>[s(l(J),null,{default:a(()=>[d(" Please select a specialization to view schedules for Year "+i(p.value)+". ",1)]),_:1})]),_:1})):y("",!0),W.value&&!b.value?(o(),g(l(H),{key:1,class:"mt-4"},{default:a(()=>[s(l(J),null,{default:a(()=>[d(" Please select a track (DEV or AI) to view schedules for GI Year "+i(p.value)+". ",1)]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1}),w.replicatedWeeks.length===0?(o(),g(l(H),{key:0},{default:a(()=>[s(l(J),null,{default:a(()=>[...e[30]||(e[30]=[d(" No schedules available yet. The admin needs to create and replicate the template first. ",-1)])]),_:1})]),_:1})):y("",!0),w.replicatedWeeks.length>0?(o(),g(l(de),{key:1},{default:a(()=>[s(l(ie),null,{default:a(()=>[s(l(ce),null,{default:a(()=>[d(" Year "+i(p.value)+" - Semester "+i(A.value)+" - "+i(We.value),1)]),_:1}),s(l(ke),null,{default:a(()=>[...e[31]||(e[31]=[d(" View all schedules. You can only edit your own teaching hours (shown in blue). ",-1)])]),_:1})]),_:1}),s(l(ve),null,{default:a(()=>[Q.value?y("",!0):(o(),g(l(H),{key:0,class:"mb-4",variant:"destructive"},{default:a(()=>[s(l(J),null,{default:a(()=>[d(" âš ï¸ Please select a specialization above to view and edit schedules for Year "+i(p.value)+". ",1)]),_:1})]),_:1})),Q.value?(o(),v("div",Qe,[u("table",Ke,[u("thead",null,[u("tr",null,[e[32]||(e[32]=u("th",{class:"border p-2 bg-gray-100 text-sm font-medium sticky left-0 z-10 text-gray-900"},"Time",-1)),(o(!0),v(S,null,D(w.days,t=>(o(),v("th",{key:t,class:"border p-2 bg-gray-100 text-sm font-medium text-gray-900"},i(t),1))),128))])]),u("tbody",null,[(o(!0),v(S,null,D(w.timeSlots,t=>(o(),v("tr",{key:t.start},[u("td",Xe,i(t.start.substring(0,5))+" - "+i(t.end.substring(0,5)),1),(o(!0),v(S,null,D(w.days,n=>(o(),v("td",{key:`${n}-${t.start}`,class:"border p-1 relative group hover:bg-gray-50 min-w-[200px]"},[!pe(n,t)&&x(n,t)?.module?(o(),v("div",{key:0,class:ne(["p-2 rounded text-xs",Y(n)&&x(n,t)?.teacher_id===l(z)?"bg-gray-200 text-gray-500 cursor-not-allowed opacity-60":O(x(n,t))?"bg-blue-100 text-blue-900 cursor-pointer hover:bg-blue-200":"bg-gray-100 text-gray-700 cursor-default"]),onClick:c=>x(n,t)?.teacher_id===l(z)?Ve(x(n,t)):te(n,t)},[u("div",et,[d(i(x(n,t)?.module?.code)+" ",1),x(n,t)?.schedule_type?(o(),g(l(q),{key:0,variant:"secondary",class:"ml-1"},{default:a(()=>[d(i(x(n,t)?.schedule_type),1)]),_:2},1024)):y("",!0),Y(n)&&x(n,t)?.teacher_id===l(z)?(o(),g(l(q),{key:1,variant:"outline",class:"ml-1 text-[10px]"},{default:a(()=>[...e[33]||(e[33]=[d(" ðŸ”’ Future ",-1)])]),_:1})):y("",!0)]),u("div",tt,i(x(n,t)?.module?.name),1),x(n,t)?.teacher?(o(),v("div",lt," ðŸ‘¤ "+i(x(n,t)?.teacher?.name),1)):y("",!0),x(n,t)?.teacher_id===l(z)&&!Y(n)?(o(),v("div",at," ðŸ“‹ Click for options ")):y("",!0),x(n,t)?.teacher_id===l(z)&&Y(n)?(o(),v("div",st," ðŸ”’ Click for options (attendance locked) ")):y("",!0)],10,Ze)):!pe(n,t)&&O(null)?(o(),v("div",ut,[s(l(T),{onClick:c=>te(n,t),variant:"ghost",size:"sm",class:"w-full text-xs opacity-0 group-hover:opacity-100"},{default:a(()=>[...e[34]||(e[34]=[d(" + Assign ",-1)])]),_:1},8,["onClick"])])):(o(),v("div",nt,[re(u("select",{"onUpdate:modelValue":e[5]||(e[5]=c=>f.value.moduleId=c),class:"w-full h-8 text-xs border border-gray-300 rounded px-2 bg-white text-gray-900"},[e[35]||(e[35]=u("option",{value:null},"Select module",-1)),(o(!0),v(S,null,D(w.modules,c=>(o(),v("option",{key:c.id,value:c.id},i(c.code)+" - "+i(c.name),9,rt))),128))],512),[[oe,f.value.moduleId]]),re(u("select",{"onUpdate:modelValue":e[6]||(e[6]=c=>f.value.scheduleType=c),class:"w-full h-8 text-xs border border-gray-300 rounded px-2 bg-white text-gray-900",disabled:!f.value.moduleId},[...e[36]||(e[36]=[u("option",{value:null},"Type (optional)",-1),u("option",{value:"course"},"Course",-1),u("option",{value:"TD"},"TD",-1),u("option",{value:"TP"},"TP",-1),u("option",{value:"exam"},"Exam",-1)])],8,ot),[[oe,f.value.scheduleType]]),re(u("select",{"onUpdate:modelValue":e[7]||(e[7]=c=>f.value.teacherId=c),class:"w-full h-8 text-xs border border-gray-300 rounded px-2 bg-white text-gray-900",disabled:!f.value.moduleId},[e[37]||(e[37]=u("option",{value:null},"Teacher (optional)",-1)),(o(!0),v(S,null,D(w.teachers,c=>(o(),v("option",{key:c.id,value:c.id},i(c.name),9,it))),128))],8,dt),[[oe,f.value.teacherId]]),u("div",ct,[s(l(T),{onClick:c=>Ie(n,t),variant:"default",size:"sm",class:"flex-1 text-xs h-7",disabled:!f.value.moduleId},{default:a(()=>[d(i(x(n,t)?"Update":"Save"),1)]),_:2},1032,["onClick","disabled"]),x(n,t)?.module?(o(),g(l(T),{key:0,onClick:c=>xe(n,t),variant:"destructive",size:"sm",class:"flex-1 text-xs h-7"},{default:a(()=>[...e[38]||(e[38]=[d(" Delete ",-1)])]),_:1},8,["onClick"])):y("",!0),s(l(T),{onClick:e[8]||(e[8]=c=>Ce()),variant:"ghost",size:"sm",class:"text-xs h-7"},{default:a(()=>[...e[39]||(e[39]=[d(" âœ• ",-1)])]),_:1})])]))]))),128))]))),128))])])])):y("",!0),u("div",vt,[u("div",ft,[u("strong",null,"Available Modules ("+i(w.modules.length)+"):",1)]),u("div",mt,[(o(!0),v(S,null,D(w.modules,t=>(o(),g(l(q),{key:t.id,variant:"outline"},{default:a(()=>[d(i(t.code)+" - "+i(t.name),1)]),_:2},1024))),128))])])]),_:1})]),_:1})):y("",!0),w.replicatedWeeks.length>0?(o(),g(l(de),{key:2},{default:a(()=>[s(l(ie),null,{default:a(()=>[s(l(ce),null,{default:a(()=>[...e[40]||(e[40]=[d("Quick Week Navigation",-1)])]),_:1})]),_:1}),s(l(ve),null,{default:a(()=>[u("div",pt,[s(l(T),{variant:"outline",size:"sm",onClick:e[9]||(e[9]=t=>{_.value=0,ee()}),class:ne({"bg-purple-100 border-purple-500":se.value})},{default:a(()=>[...e[41]||(e[41]=[d(" Template ",-1)])]),_:1},8,["class"]),(o(!0),v(S,null,D(w.replicatedWeeks,t=>(o(),g(l(T),{key:t,variant:"outline",size:"sm",onClick:n=>{_.value=t,ee()},class:ne({"bg-blue-100 border-blue-500":_.value===t&&!se.value})},{default:a(()=>[d(" Week "+i(t),1)]),_:2},1032,["onClick","class"]))),128))])]),_:1})]),_:1})):y("",!0)])]),s(l(be),{open:Z.value,"onUpdate:open":e[13]||(e[13]=t=>!t&&le())},{default:a(()=>[s(l(he),{class:"max-w-md"},{default:a(()=>[s(l(we),null,{default:a(()=>[s(l($e),null,{default:a(()=>[...e[43]||(e[43]=[d("Schedule Actions",-1)])]),_:1}),$.value?(o(),g(l(Se),{key:0},{default:a(()=>[d(i($.value.module?.code)+" - "+i($.value.module?.name)+" ",1),e[44]||(e[44]=u("br",null,null,-1)),d(" "+i($.value.day)+", "+i($.value.start_time.substring(0,5))+" - "+i($.value.end_time.substring(0,5)),1)]),_:1})):y("",!0)]),_:1}),u("div",xt,[s(l(T),{onClick:e[10]||(e[10]=t=>ae("attendance")),class:"w-full justify-start h-auto py-4",variant:"outline",disabled:$.value&&Y($.value.day)},{default:a(()=>[u("div",yt,[e[46]||(e[46]=u("span",{class:"text-2xl"},"ðŸ“‹",-1)),u("div",gt,[e[45]||(e[45]=u("div",{class:"font-semibold"},"Mark Attendance",-1)),u("div",_t,i($.value&&Y($.value.day)?"Cannot mark attendance for future classes":"Record student attendance for this session"),1)])])]),_:1},8,["disabled"]),s(l(T),{onClick:e[11]||(e[11]=t=>ae("edit")),class:"w-full justify-start h-auto py-4",variant:"outline"},{default:a(()=>[...e[47]||(e[47]=[u("div",{class:"flex items-start gap-3 text-left w-full"},[u("span",{class:"text-2xl"},"âœï¸"),u("div",{class:"flex-1"},[u("div",{class:"font-semibold"},"Edit Schedule"),u("div",{class:"text-xs text-muted-foreground mt-1"}," Modify time, type, or teacher assignment ")])],-1)])]),_:1}),s(l(T),{onClick:e[12]||(e[12]=t=>ae("delete")),class:"w-full justify-start h-auto py-4",variant:"outline"},{default:a(()=>[...e[48]||(e[48]=[u("div",{class:"flex items-start gap-3 text-left w-full"},[u("span",{class:"text-2xl"},"ðŸ—‘ï¸"),u("div",{class:"flex-1"},[u("div",{class:"font-semibold text-red-600"},"Delete Schedule"),u("div",{class:"text-xs text-muted-foreground mt-1"}," Remove this session from the schedule ")])],-1)])]),_:1})]),u("div",kt,[s(l(T),{onClick:le,variant:"ghost"},{default:a(()=>[...e[49]||(e[49]=[d(" Cancel ",-1)])]),_:1})])]),_:1})]),_:1},8,["open"]),s(l(be),{open:K.value,"onUpdate:open":e[14]||(e[14]=t=>!t&&ye())},{default:a(()=>[s(l(he),{class:"max-w-2xl max-h-[80vh] overflow-y-auto"},{default:a(()=>[s(l(we),null,{default:a(()=>[s(l($e),null,{default:a(()=>[...e[50]||(e[50]=[d("Mark Attendance",-1)])]),_:1}),I.value?(o(),g(l(Se),{key:0},{default:a(()=>[d(i(I.value.module?.code)+" - "+i(I.value.module?.name)+" ",1),e[51]||(e[51]=u("br",null,null,-1)),d(" "+i(I.value.day)+", "+i(I.value.start_time.substring(0,5))+" - "+i(I.value.end_time.substring(0,5)),1)]),_:1})):y("",!0)]),_:1}),X.value?(o(),v("div",bt," Loading students... ")):F.value.length===0?(o(),v("div",ht," No students found for this class. ")):(o(),v("div",wt,[e[52]||(e[52]=u("div",{class:"text-sm text-gray-600 mb-4"},[d(" Check the box for students who are "),u("strong",null,"absent"),d(". Leave unchecked for present students. ")],-1)),(o(!0),v(S,null,D(F.value,t=>(o(),v("div",{key:t.id,class:"flex items-center space-x-3 p-3 border rounded hover:bg-gray-50"},[s(l(Ue),{id:`student-${t.id}`,"model-value":!!C.value[t.id],"onUpdate:modelValue":n=>{C.value[t.id]=n,ze(t.id)}},null,8,["id","model-value","onUpdate:modelValue"]),u("label",{for:`student-${t.id}`,class:"flex-1 cursor-pointer"},[u("div",St,i(t.first_name)+" "+i(t.last_name),1),u("div",Dt,i(t.code)+" - "+i(t.email),1)],8,$t),s(l(q),{variant:C.value[t.id]?"destructive":"default"},{default:a(()=>[d(i(C.value[t.id]?"Absent":"Present"),1)]),_:2},1032,["variant"])]))),128))])),u("div",Tt,[s(l(T),{onClick:ye,variant:"outline"},{default:a(()=>[...e[53]||(e[53]=[d(" Close ",-1)])]),_:1})])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{qt as default};
